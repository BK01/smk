<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Translink - SMK</title>
        <!-- SMK BOOTSTRAP - - - - - - - -->
        <script src="../../smk.js"></script>
            <!-- smk-container-sel="#smk-map-frame" -->
            <!-- smk-title-sel="#header-title, head title" -->
            <!-- smk-config="./map-config.json|./layer-config.json|theme=wf|?" -->
        <!-- - - - - - - - - - - - - - - -->
        <%= reload %>
        <style>
            #header {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 70px;

                border-bottom:      2px solid #fcba19;
                background-color: #036;
                font-family:        Helvetica,Arial,sans-serif;

                display:            flex;
                justify-content:    flex-start;
                align-items:        center;
            }

            #header img {
                margin-left:    10px;
                margin-bottom:  10px;
                height: 40px;
            }

            #header-title {
                color:          white;
                margin-left:    20px;

                display:        flex;
                flex-direction: column;
                justify-content:center;
                align-items:    flex-start;
                font-size:      18px;
            }

            #smk-map-frame {
                position: absolute;
                top: 72px;
                left: 0;
                right: 0;
                bottom: 0;
                margin: 0;
                padding: 0;
            }
        </style>
    </head>

    <body>
        <div id="header">
            <!-- <img src="bc-gov-logo-transparent.png"> -->
            <img src="https://tlweblibs.translink.ca/TransLink-logo-white.svg" alt="TransLink Logo" class="siteLogo">
            <div id="header-title">Commercial Vehicle Route Planner Beta</div>
        </div>
        <div id="smk-map-frame"></div>
    </body>

    <script>
        SMK.INIT( {
            'smk-container-sel': "#smk-map-frame",
            'smk-title-sel': "#header-title, head title",
            'smk-config': "./map-config.json|./layer-config.json|./layer-display-config.json|./api-key.json|?",
        } ).then( function () {
            SMK.HANDLER.set( 'bespoke', 'initialized', function ( smk ) {
                // console.log( 'init!' )
            } )
            SMK.HANDLER.set( 'bespoke', 'activated', function ( smk, tool ) {
                // console.log( 'active!' )
                var html = '<div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer vel sapien auctor, blandit mi eget, iaculis erat. Nam rutrum luctus est, sed accumsan sapien rhoncus ac. Curabitur in suscipit sem. Integer mollis risus cursus tempor ullamcorper. Nullam mollis urna at ante consequat, eget rhoncus velit varius. Sed posuere tortor nec eleifend feugiat. Cras vestibulum dolor ut elit aliquet, nec auctor magna lacinia. Pellentesque eget quam quis mi iaculis venenatis. Vestibulum vel enim risus.</div>'
                var el = $( html ).get(0)            
                tool.content = el.innerHTML
            } )
            
            SMK.HANDLER.set( 'bespoke--foo', 'activated', function ( smk, tool ) {
                // console.log( 'foo active!' )
                tool.content = '<div>I am a legend in my own mind</div>'
            } )

            include( 'feature-list' ).then( function () {
                Vue.component( 'wf-feature', {
                    template: '#wf-feature-template',
                    extends: SMK.TYPE.VueFeatureComponent
                } )
            } )
        } )
    </script>

    <style>
        .wf-feature-attribute {
            padding-top: 10px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            word-break: break-word;
        }

        .wf-feature-attribute.wf-title-feature-attribute {
            font-weight: bold;
            padding-top: 0px;
        }

        .wf-feature-attribute-title {
            flex-basis: 40%;
            font-size: 11px;
            text-align: right;
        }

        .wf-feature-attribute-value {
            flex-basis: 55%;
            font-size: 13px;
            text-align: left;
        }
    </style>

    <template id="wf-feature-template">
        <div>
            <div class="smk-attributes" v-if="attributes && attributes.length > 0">
                <div class="wf-feature-attribute wf-title-feature-attribute" v-if="attributes.length > 0">
                    <span class="wf-feature-attribute-title" v-html="insertWordBreaks( attributes[ 0 ].title )"></span>
                    <span class="wf-feature-attribute-value" v-html="formatAttribute( attributes[ 0 ] )"></span>
                </div>
                <div class="wf-feature-attribute" v-for="(attr,index) in attributes" v-if="attr.visible !== false && index > 0">
                    <span class="wf-feature-attribute-title" v-html="insertWordBreaks( attr.title )"></span>
                    <span class="wf-feature-attribute-value" v-html="formatAttribute( attr )"></span>
                </div>
            </div>
        </div>
    </template>
</html>
